# How to Add New Products with Stock - Complete Guide

**Date:** February 7, 2025  
**Status:** ‚úÖ **PRODUCTION READY**

---

## üìã **Overview**

This guide explains how to add new products with initial stock to your jewelry website. There are three methods available depending on your needs.

---

## üéØ **Methods to Add Products**

### **Method 1: MongoDB Direct (Recommended for Bulk)**

**Best for:** Adding multiple products at once, initial setup, bulk imports

**Steps:**

1. **Connect to MongoDB** (MongoDB Atlas, MongoDB Compass, or CLI)

2. **Insert Product Document:**

```javascript
// Example: Add a necklace with 10 in stock
db.products.insertOne({
  slug: "diamond-necklace",
  title: "Diamond Necklace",
  description: "Beautiful handcrafted diamond necklace with elegant design",
  shortDescription: "Elegant diamond necklace",
  price: 50000,
  currency: "INR",
  category: "necklaces",  // Must match active category in DB
  material: "Gold",
  images: ["/images/necklace-1.jpg", "/images/necklace-2.jpg"],
  primaryImage: "/images/necklace-1.jpg",
  alt: "Diamond necklace",
  inventory: {
    quantity: 10,  // ‚Üê Initial stock: 10 necklaces
    reservedQuantity: 0,
    trackQuantity: true,
    allowBackorder: false,
    lowStockThreshold: 3,  // Alert when 3 or fewer left
    location: "warehouse-1"  // Optional
  },
  status: "active",  // Set to "active" to make it visible
  featured: false,
  mostLoved: false,
  newArrival: true,
  views: 0,
  salesCount: 0,
  createdAt: new Date(),
  updatedAt: new Date(),
  publishedAt: new Date()
});

// Example: Add earrings with 5 in stock
db.products.insertOne({
  slug: "gold-earrings",
  title: "Gold Earrings",
  description: "Elegant gold earrings perfect for any occasion",
  shortDescription: "Elegant gold earrings",
  price: 15000,
  currency: "INR",
  category: "earrings",  // Must match active category in DB
  material: "Gold",
  images: ["/images/earrings-1.jpg"],
  primaryImage: "/images/earrings-1.jpg",
  alt: "Gold earrings",
  inventory: {
    quantity: 5,  // ‚Üê Initial stock: 5 earrings
    reservedQuantity: 0,
    trackQuantity: true,
    allowBackorder: false,
    lowStockThreshold: 2,
    location: "warehouse-1"
  },
  status: "active",
  featured: false,
  mostLoved: false,
  newArrival: true,
  views: 0,
  salesCount: 0,
  createdAt: new Date(),
  updatedAt: new Date(),
  publishedAt: new Date()
});
```

**Note:** SKU will be auto-generated by the pre-save hook if not provided.

---

### **Method 2: Using MongoDB Script (Node.js/TypeScript)**

**Best for:** Programmatic product creation, automation, bulk imports

**Create a script file:** `scripts/add-products.ts`

```typescript
import connectDB from '../lib/mongodb';
import Product from '../models/Product';

async function addProducts() {
  try {
    await connectDB();
    console.log('‚úÖ Connected to MongoDB');

    // Add necklace
    const necklace = new Product({
      slug: 'diamond-necklace',
      title: 'Diamond Necklace',
      description: 'Beautiful handcrafted diamond necklace with elegant design',
      shortDescription: 'Elegant diamond necklace',
      price: 50000,
      currency: 'INR',
      category: 'necklaces',
      material: 'Gold',
      images: ['/images/necklace-1.jpg', '/images/necklace-2.jpg'],
      primaryImage: '/images/necklace-1.jpg',
      alt: 'Diamond necklace',
      inventory: {
        quantity: 10,  // ‚Üê Initial stock
        reservedQuantity: 0,
        trackQuantity: true,
        allowBackorder: false,
        lowStockThreshold: 3,
      },
      status: 'active',
      featured: false,
      mostLoved: false,
      newArrival: true,
    });

    await necklace.save();
    console.log('‚úÖ Necklace added:', necklace.sku);

    // Add earrings
    const earrings = new Product({
      slug: 'gold-earrings',
      title: 'Gold Earrings',
      description: 'Elegant gold earrings perfect for any occasion',
      shortDescription: 'Elegant gold earrings',
      price: 15000,
      currency: 'INR',
      category: 'earrings',
      material: 'Gold',
      images: ['/images/earrings-1.jpg'],
      primaryImage: '/images/earrings-1.jpg',
      alt: 'Gold earrings',
      inventory: {
        quantity: 5,  // ‚Üê Initial stock
        reservedQuantity: 0,
        trackQuantity: true,
        allowBackorder: false,
        lowStockThreshold: 2,
      },
      status: 'active',
      featured: false,
      mostLoved: false,
      newArrival: true,
    });

    await earrings.save();
    console.log('‚úÖ Earrings added:', earrings.sku);

    console.log('\n‚úÖ All products added successfully!');
    process.exit(0);
  } catch (error) {
    console.error('‚ùå Error adding products:', error);
    process.exit(1);
  }
}

addProducts();
```

**Run the script:**
```bash
npm run tsx scripts/add-products.ts
```

---

### **Method 3: Using API (If POST endpoint exists)**

**Note:** Currently, the `/api/products` route only supports GET. If you need a POST endpoint for product creation, it would need to be implemented.

**Future API Endpoint (if implemented):**
```bash
POST /api/products
Authorization: Bearer <admin-token>
Content-Type: application/json

{
  "title": "Diamond Necklace",
  "slug": "diamond-necklace",
  "description": "Beautiful handcrafted diamond necklace",
  "price": 50000,
  "category": "necklaces",
  "material": "Gold",
  "primaryImage": "/images/necklace.jpg",
  "images": ["/images/necklace.jpg"],
  "alt": "Diamond necklace",
  "inventory": {
    "quantity": 10,
    "trackQuantity": true,
    "allowBackorder": false,
    "lowStockThreshold": 3
  },
  "status": "active"
}
```

---

## üìù **Required Fields**

### **Minimum Required Fields:**

```typescript
{
  slug: string,              // Unique URL slug (e.g., "diamond-necklace")
  title: string,             // Product name
  description: string,        // Full description
  price: number,             // Selling price
  category: string,          // Category slug (must exist in DB)
  material: string,          // Material (e.g., "Gold", "Silver")
  primaryImage: string,       // Main product image URL
  images: string[],          // Array of image URLs
  alt: string,               // Image alt text for SEO
  inventory: {
    quantity: number,        // Initial stock quantity
    trackQuantity: boolean,  // Whether to track inventory
    allowBackorder: boolean, // Allow orders when out of stock
    lowStockThreshold: number // Alert threshold
  },
  status: "active" | "draft" | "archived" | "out_of_stock"
}
```

### **Optional Fields:**

```typescript
{
  shortDescription?: string,   // Short description (max 200 chars)
  sku?: string,                // Auto-generated if not provided
  barcode?: string,            // Optional barcode
  compareAtPrice?: number,     // Original price (for discounts)
  costPrice?: number,         // Cost price (for profit calculation)
  subcategory?: string,        // Optional subcategory
  tags?: string[],             // Search tags
  weight?: number,            // Weight in grams
  dimensions?: {
    length?: number,
    width?: number,
    height?: number,
    unit: "cm" | "mm" | "inch"
  },
  featured?: boolean,          // Show on homepage
  mostLoved?: boolean,         // Show in "Most Loved" section
  newArrival?: boolean,        // Mark as new product
  seo?: {
    metaTitle?: string,
    metaDescription?: string,
    keywords?: string[],
    canonicalUrl?: string
  },
  inventory: {
    location?: string          // Warehouse/location identifier
  }
}
```

---

## ‚úÖ **Step-by-Step: Adding Your First Products**

### **Step 1: Verify Categories Exist**

Before adding products, ensure the categories exist and are active:

```javascript
// Check active categories
db.categories.find({ active: true });
```

**Common categories:**
- `necklaces`
- `earrings`
- `rings`
- `bracelets`
- `pendants`

### **Step 2: Prepare Product Data**

Create a JSON file with your products:

```json
[
  {
    "slug": "diamond-necklace",
    "title": "Diamond Necklace",
    "description": "Beautiful handcrafted diamond necklace with elegant design",
    "price": 50000,
    "category": "necklaces",
    "material": "Gold",
    "primaryImage": "/images/necklace.jpg",
    "images": ["/images/necklace.jpg"],
    "alt": "Diamond necklace",
    "inventory": {
      "quantity": 10,
      "trackQuantity": true,
      "allowBackorder": false,
      "lowStockThreshold": 3
    },
    "status": "active"
  },
  {
    "slug": "gold-earrings",
    "title": "Gold Earrings",
    "description": "Elegant gold earrings perfect for any occasion",
    "price": 15000,
    "category": "earrings",
    "material": "Gold",
    "primaryImage": "/images/earrings.jpg",
    "images": ["/images/earrings.jpg"],
    "alt": "Gold earrings",
    "inventory": {
      "quantity": 5,
      "trackQuantity": true,
      "allowBackorder": false,
      "lowStockThreshold": 2
    },
    "status": "active"
  }
]
```

### **Step 3: Insert Products**

**Option A: MongoDB Compass/Atlas UI**
1. Open MongoDB Compass or Atlas
2. Navigate to your database
3. Select `products` collection
4. Click "Insert Document"
5. Paste your product JSON
6. Click "Insert"

**Option B: MongoDB Shell**
```javascript
// Insert single product
db.products.insertOne({ /* product data */ });

// Insert multiple products
db.products.insertMany([ /* array of products */ ]);
```

**Option C: Node.js Script**
```bash
npm run tsx scripts/add-products.ts
```

### **Step 4: Verify Products**

```javascript
// Check products were added
db.products.find({ status: "active" });

// Check inventory
db.products.find({}, {
  title: 1,
  "inventory.quantity": 1,
  "inventory.reservedQuantity": 1,
  status: 1
});
```

---

## üîÑ **Adding Stock to Existing Products**

If you need to add more stock to existing products, use the **Restock API**:

```bash
POST /api/inventory/[productId]/restock
Authorization: Bearer <admin-token>
Content-Type: application/json

{
  "quantity": 5,
  "reason": "New shipment received"
}
```

**Or MongoDB:**
```javascript
db.products.updateOne(
  { slug: "diamond-necklace" },
  { $inc: { "inventory.quantity": 5 } }
);
```

---

## üìä **Product Status Values**

- **`active`** - Product is visible and available for purchase
- **`draft`** - Product is saved but not visible (work in progress)
- **`archived`** - Product is hidden (discontinued)
- **`out_of_stock`** - Automatically set when stock reaches 0

---

## üéØ **Best Practices**

### **1. Use Unique Slugs**

Slugs must be unique and URL-friendly:
- ‚úÖ `diamond-necklace`
- ‚úÖ `gold-earrings-2025`
- ‚ùå `Diamond Necklace` (spaces)
- ‚ùå `diamond-necklace!` (special chars)

### **2. Set Appropriate Stock Thresholds**

```javascript
inventory: {
  quantity: 10,
  lowStockThreshold: 3,  // Alert when 3 or fewer left
  trackQuantity: true
}
```

### **3. Use Proper Image Paths**

Images should be in `/public/images/`:
```javascript
primaryImage: "/images/necklace.jpg"  // ‚úÖ Correct
primaryImage: "images/necklace.jpg"   // ‚ùå Missing leading slash
```

### **4. Set Status to "active"**

Only products with `status: "active"` are visible on the website.

### **5. Validate Categories**

Ensure the category exists and is active:
```javascript
// Check category exists
db.categories.findOne({ slug: "necklaces", active: true });
```

---

## üîç **Verification Checklist**

After adding products, verify:

- [ ] Product appears in `/api/products` endpoint
- [ ] Product page loads at `/designs/[slug]`
- [ ] Stock quantity is correct
- [ ] Images load correctly
- [ ] Category is correct
- [ ] Price displays correctly
- [ ] Product is searchable

---

## üõ†Ô∏è **Troubleshooting**

### **Error: "Category does not exist"**

**Solution:** Ensure category exists and is active:
```javascript
db.categories.updateOne(
  { slug: "necklaces" },
  { $set: { active: true } }
);
```

### **Error: "Slug already exists"**

**Solution:** Use a unique slug:
```javascript
slug: "diamond-necklace-v2"  // Add version or variant
```

### **Error: "SKU already exists"**

**Solution:** SKU is auto-generated. If manually set, ensure uniqueness.

### **Product Not Visible**

**Check:**
1. Status is `"active"`
2. Category is active
3. Images exist at specified paths
4. Product is not archived

---

## üìö **Related Documentation**

- **[Stock Management Guide](./STOCK_MANAGEMENT_GUIDE.md)** - How stock is managed automatically
- **[Inventory Guide](./INVENTORY_GUIDE.md)** - Complete inventory system documentation
- **[Models Guide](./MODELS_GUIDE.md)** - Product model structure

---

## ‚úÖ **Quick Reference**

**Add Product with Stock:**
```javascript
db.products.insertOne({
  slug: "product-slug",
  title: "Product Name",
  description: "Product description",
  price: 10000,
  category: "necklaces",
  material: "Gold",
  primaryImage: "/images/product.jpg",
  images: ["/images/product.jpg"],
  alt: "Product image",
  inventory: {
    quantity: 10,  // ‚Üê Stock quantity
    trackQuantity: true,
    allowBackorder: false,
    lowStockThreshold: 3
  },
  status: "active"
});
```

**Add More Stock:**
```bash
POST /api/inventory/[productId]/restock
{ "quantity": 5 }
```

---

**Last Updated:** February 7, 2025
